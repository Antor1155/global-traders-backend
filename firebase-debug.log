[debug] [2024-03-13T04:11:13.508Z] ----------------------------------------------------------------------
[debug] [2024-03-13T04:11:13.510Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js init
[debug] [2024-03-13T04:11:13.510Z] CLI Version:   12.5.4
[debug] [2024-03-13T04:11:13.510Z] Platform:      win32
[debug] [2024-03-13T04:11:13.511Z] Node Version:  v18.18.0
[debug] [2024-03-13T04:11:13.511Z] Time:          Wed Mar 13 2024 10:11:13 GMT+0600 (Bangladesh Standard Time)
[debug] [2024-03-13T04:11:13.511Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-03-13T04:11:13.569Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-03-13T04:11:13.570Z] > authorizing via signed-in user (it@socialengagementgroup.com)
[info] 
     ######## #### ########  ######## ########     ###     ######  ########
     ##        ##  ##     ## ##       ##     ##  ##   ##  ##       ##
     ######    ##  ########  ######   ########  #########  ######  ######
     ##        ##  ##    ##  ##       ##     ## ##     ##       ## ##
     ##       #### ##     ## ######## ########  ##     ##  ######  ########

You're about to initialize a Firebase project in this directory:

  D:\codings\official\glabal-traders\golbal-traders-server-side

Before we get started, keep in mind:

  * You are initializing within an existing Firebase project directory

[info] 
=== Project Setup
[info] 
[info] First, let's associate this project directory with a Firebase project.
[info] You can create multiple project aliases by running firebase use --add, 
[info] but for now we'll just set up a default project.
[info] 
[debug] [2024-03-13T04:11:25.336Z] Using project from CLI flag: global-traders-usa-84059
[debug] [2024-03-13T04:11:25.338Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 [none]
[debug] [2024-03-13T04:11:27.035Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 200
[debug] [2024-03-13T04:11:27.035Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 {"projectId":"global-traders-usa-84059","projectNumber":"1069022321540","displayName":"global-traders-usa","name":"projects/global-traders-usa-84059","resources":{"hostingSite":"global-traders-usa-84059","storageBucket":"global-traders-usa-84059.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_a276bd60-b60c-4b4d-ab4e-a3589e1778a1"}
[info] i  Using project global-traders-usa-84059 (global-traders-usa) 
[info] 
=== Functions Setup
[debug] [2024-03-13T04:11:27.041Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-03-13T04:11:27.041Z] > authorizing via signed-in user (it@socialengagementgroup.com)
[debug] [2024-03-13T04:11:27.041Z] [iam] checking project global-traders-usa-84059 for permissions ["firebase.projects.get"]
[debug] [2024-03-13T04:11:27.041Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions [none]
[debug] [2024-03-13T04:11:27.041Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:11:27.041Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["firebase.projects.get"]}
[debug] [2024-03-13T04:11:28.574Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions 200
[debug] [2024-03-13T04:11:28.574Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["firebase.projects.get"]}
[debug] [2024-03-13T04:11:28.575Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com [none]
[debug] [2024-03-13T04:11:28.575Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:11:28.576Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com [none]
[debug] [2024-03-13T04:11:28.576Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:11:30.379Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com 200
[debug] [2024-03-13T04:11:30.379Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-03-13T04:11:30.380Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com 200
[debug] [2024-03-13T04:11:30.380Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com [omitted]
[info] 
Detected existing codebase(s): default

[info] Let's create a new codebase for your functions.
[info] A directory corresponding to the codebase will be created in your project
[info] with sample code pre-configured.

[info] See https://firebase.google.com/docs/functions/organize-functions for
[info] more information on organizing your functions using codebases.

[info] Functions can be deployed with firebase deploy.

[debug] [2024-03-13T04:30:59.484Z] ----------------------------------------------------------------------
[debug] [2024-03-13T04:30:59.486Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2024-03-13T04:30:59.486Z] CLI Version:   12.5.4
[debug] [2024-03-13T04:30:59.486Z] Platform:      win32
[debug] [2024-03-13T04:30:59.486Z] Node Version:  v18.18.0
[debug] [2024-03-13T04:30:59.487Z] Time:          Wed Mar 13 2024 10:30:59 GMT+0600 (Bangladesh Standard Time)
[debug] [2024-03-13T04:30:59.487Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-03-13T04:30:59.547Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-03-13T04:30:59.548Z] > authorizing via signed-in user (it@socialengagementgroup.com)
[debug] [2024-03-13T04:30:59.548Z] [iam] checking project global-traders-usa-84059 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-03-13T04:30:59.554Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions [none]
[debug] [2024-03-13T04:30:59.554Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:30:59.554Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-03-13T04:31:01.104Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions 200
[debug] [2024-03-13T04:31:01.104Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-03-13T04:31:01.104Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-03-13T04:31:01.104Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-03-13T04:31:02.884Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-03-13T04:31:02.884Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'global-traders-usa-84059'...
[info] 
[info] i  deploying functions 
[debug] [2024-03-13T04:31:02.887Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 [none]
[debug] [2024-03-13T04:31:03.460Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 200
[debug] [2024-03-13T04:31:03.460Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 {"projectId":"global-traders-usa-84059","projectNumber":"1069022321540","displayName":"global-traders-usa","name":"projects/global-traders-usa-84059","resources":{"hostingSite":"global-traders-usa-84059","storageBucket":"global-traders-usa-84059.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_a276bd60-b60c-4b4d-ab4e-a3589e1778a1"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-03-13T04:31:03.463Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com [none]
[debug] [2024-03-13T04:31:03.463Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:03.464Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com [none]
[debug] [2024-03-13T04:31:03.464Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:03.465Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com [none]
[debug] [2024-03-13T04:31:03.465Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:03.465Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com [none]
[debug] [2024-03-13T04:31:03.465Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:05.394Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com 200
[debug] [2024-03-13T04:31:05.394Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-03-13T04:31:05.396Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com 200
[debug] [2024-03-13T04:31:05.396Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-03-13T04:31:05.418Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com 200
[debug] [2024-03-13T04:31:05.418Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-03-13T04:31:05.439Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com 200
[debug] [2024-03-13T04:31:05.439Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-03-13T04:31:05.440Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059/adminSdkConfig [none]
[debug] [2024-03-13T04:31:06.165Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059/adminSdkConfig 200
[debug] [2024-03-13T04:31:06.165Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059/adminSdkConfig {"projectId":"global-traders-usa-84059","storageBucket":"global-traders-usa-84059.appspot.com","locationId":"us-central"}
[debug] [2024-03-13T04:31:06.166Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/global-traders-usa-84059/configs [none]
[debug] [2024-03-13T04:31:06.812Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/global-traders-usa-84059/configs 200
[debug] [2024-03-13T04:31:06.812Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/global-traders-usa-84059/configs {}
[debug] [2024-03-13T04:31:06.813Z] Validating nodejs source
[debug] [2024-03-13T04:31:07.791Z] > [functions] package.json contents: {
  "name": "golbal-traders-server-side",
  "version": "1.0.0",
  "description": "��#\u0000 \u0000G\u0000l\u0000o\u0000b\u0000a\u0000l\u0000-\u0000t\u0000r\u0000a\u0000d\u0000e\u0000r\u0000s\u0000-\u0000b\u0000a\u0000c\u0000k\u0000e\u0000n\u0000d\u0000-\u0000s\u0000e\u0000r\u0000v\u0000e\u0000r\u0000\r\u0000 \u0000",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node index.js",
    "dev": "nodemon index.js",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.8.0",
    "mongoose": "^7.4.5",
    "nodemon": "^3.0.1",
    "stripe": "^13.7.0"
  }
}
[debug] [2024-03-13T04:31:07.792Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-03-13T04:31:07.793Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-13T04:31:07.801Z] Found firebase-functions binary at 'D:\codings\official\glabal-traders\golbal-traders-server-side\node_modules\.bin\firebase-functions'
[info] Serving at port 8127

[error] node:events:495
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::8127
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at Function.listen (D:\codings\official\glabal-traders\golbal-traders-server-side\node_modules\express\lib\application.js:635:24)
    at Object.<anonymous> (D:\codings\official\glabal-traders\golbal-traders-server-side\index.js:425:5)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1844:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 8127
}

Node.js v18.18.0

[debug] [2024-03-13T04:31:08.497Z] Failed to call quitquitquit. This often means the server failed to start request to http://localhost:8127/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8127 {"message":"request to http://localhost:8127/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8127","type":"system","errno":"ECONNREFUSED","code":"ECONNREFUSED"}
[debug] [2024-03-13T04:31:08.820Z] FetchError: request to http://127.0.0.1:8127/__/functions.yaml failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:517:28)
    at ClientRequest.emit (node:domain:489:12)
    at Socket.socketErrorListener (node:_http_client:501:9)
    at Socket.emit (node:events:517:28)
    at Socket.emit (node:domain:489:12)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
[error] 
[error] Error: An unexpected error has occurred.
[debug] [2024-03-13T04:31:43.659Z] ----------------------------------------------------------------------
[debug] [2024-03-13T04:31:43.661Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2024-03-13T04:31:43.662Z] CLI Version:   12.5.4
[debug] [2024-03-13T04:31:43.662Z] Platform:      win32
[debug] [2024-03-13T04:31:43.662Z] Node Version:  v18.18.0
[debug] [2024-03-13T04:31:43.663Z] Time:          Wed Mar 13 2024 10:31:43 GMT+0600 (Bangladesh Standard Time)
[debug] [2024-03-13T04:31:43.663Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-03-13T04:31:43.727Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-03-13T04:31:43.727Z] > authorizing via signed-in user (it@socialengagementgroup.com)
[debug] [2024-03-13T04:31:43.727Z] [iam] checking project global-traders-usa-84059 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-03-13T04:31:43.734Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions [none]
[debug] [2024-03-13T04:31:43.734Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:43.734Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-03-13T04:31:45.258Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions 200
[debug] [2024-03-13T04:31:45.258Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-03-13T04:31:45.258Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-03-13T04:31:45.259Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-03-13T04:31:47.035Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-03-13T04:31:47.035Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/global-traders-usa-84059/serviceAccounts/global-traders-usa-84059@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'global-traders-usa-84059'...
[info] 
[info] i  deploying functions 
[debug] [2024-03-13T04:31:47.038Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 [none]
[debug] [2024-03-13T04:31:47.711Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 200
[debug] [2024-03-13T04:31:47.711Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 {"projectId":"global-traders-usa-84059","projectNumber":"1069022321540","displayName":"global-traders-usa","name":"projects/global-traders-usa-84059","resources":{"hostingSite":"global-traders-usa-84059","storageBucket":"global-traders-usa-84059.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_a276bd60-b60c-4b4d-ab4e-a3589e1778a1"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-03-13T04:31:47.713Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com [none]
[debug] [2024-03-13T04:31:47.713Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:47.714Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com [none]
[debug] [2024-03-13T04:31:47.715Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:47.715Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com [none]
[debug] [2024-03-13T04:31:47.715Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:47.716Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com [none]
[debug] [2024-03-13T04:31:47.716Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:49.553Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com 200
[debug] [2024-03-13T04:31:49.553Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-03-13T04:31:49.559Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com 200
[debug] [2024-03-13T04:31:49.559Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-03-13T04:31:49.628Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com 200
[debug] [2024-03-13T04:31:49.628Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-03-13T04:31:49.678Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com 200
[debug] [2024-03-13T04:31:49.678Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/global-traders-usa-84059/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-03-13T04:31:49.678Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059/adminSdkConfig [none]
[debug] [2024-03-13T04:31:50.965Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059/adminSdkConfig 200
[debug] [2024-03-13T04:31:50.965Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059/adminSdkConfig {"projectId":"global-traders-usa-84059","storageBucket":"global-traders-usa-84059.appspot.com","locationId":"us-central"}
[debug] [2024-03-13T04:31:50.966Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/global-traders-usa-84059/configs [none]
[debug] [2024-03-13T04:31:51.551Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/global-traders-usa-84059/configs 200
[debug] [2024-03-13T04:31:51.551Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/global-traders-usa-84059/configs {}
[debug] [2024-03-13T04:31:51.552Z] Validating nodejs source
[debug] [2024-03-13T04:31:52.272Z] > [functions] package.json contents: {
  "name": "golbal-traders-server-side",
  "version": "1.0.0",
  "description": "��#\u0000 \u0000G\u0000l\u0000o\u0000b\u0000a\u0000l\u0000-\u0000t\u0000r\u0000a\u0000d\u0000e\u0000r\u0000s\u0000-\u0000b\u0000a\u0000c\u0000k\u0000e\u0000n\u0000d\u0000-\u0000s\u0000e\u0000r\u0000v\u0000e\u0000r\u0000\r\u0000 \u0000",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node index.js",
    "dev": "nodemon index.js",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.8.0",
    "mongoose": "^7.4.5",
    "nodemon": "^3.0.1",
    "stripe": "^13.7.0"
  }
}
[debug] [2024-03-13T04:31:52.272Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-03-13T04:31:52.274Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-13T04:31:52.280Z] Found firebase-functions binary at 'D:\codings\official\glabal-traders\golbal-traders-server-side\node_modules\.bin\firebase-functions'
[info] Serving at port 8529

[debug] [2024-03-13T04:31:52.959Z] Got response from /__/functions.yaml {"endpoints":{"app":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"app"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: preparing . directory for uploading... 
[info] i  functions: packaged D:\codings\official\glabal-traders\golbal-traders-server-side (47.78 KB) for uploading 
[debug] [2024-03-13T04:31:53.027Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/-/functions [none]
[debug] [2024-03-13T04:31:53.849Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/-/functions 200
[debug] [2024-03-13T04:31:53.849Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/-/functions {}
[debug] [2024-03-13T04:31:53.850Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/global-traders-usa-84059/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-03-13T04:31:55.696Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/global-traders-usa-84059/locations/-/functions 200
[debug] [2024-03-13T04:31:55.696Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/global-traders-usa-84059/locations/-/functions {"functions":[{"name":"projects/global-traders-usa-84059/locations/us-west1/functions/ssrglobaltradersusa84059","buildConfig":{"build":"projects/1069022321540/locations/us-west1/builds/943517cd-7363-486d-b4c2-cf14d14e0ff6","runtime":"nodejs18","entryPoint":"ssrglobaltradersusa84059","source":{"storageSource":{"bucket":"gcf-v2-sources-1069022321540-us-west1","object":"ssrglobaltradersusa84059/function-source.zip","generation":"1694470149515467"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/global-traders-usa-84059/locations/us-west1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-1069022321540-us-west1","object":"ssrglobaltradersusa84059/function-source.zip","generation":"1694470149515467"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/global-traders-usa-84059/locations/us-west1/services/ssrglobaltradersusa84059","timeoutSeconds":60,"environmentVariables":{"__FIREBASE_FRAMEWORKS_ENTRY__":"next.js","__FIREBASE_DEFAULTS__":"{\"config\":{\"projectId\":\"global-traders-usa-84059\",\"appId\":\"1:1069022321540:web:419c5d35f4cdd4c64f5bd1\",\"storageBucket\":\"global-traders-usa-84059.appspot.com\",\"locationId\":\"us-central\",\"apiKey\":\"AIzaSyBFoGhOr2l4aRV_wP-1TLt3HymKtTW_Qy0\",\"authDomain\":\"global-traders-usa-84059.firebaseapp.com\",\"messagingSenderId\":\"1069022321540\"},\"_authTokenSyncURL\":\"/__session\"}","FIREBASE_CONFIG":"{\"projectId\":\"global-traders-usa-84059\",\"storageBucket\":\"global-traders-usa-84059.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"global-traders-usa-84059","EVENTARC_CLOUD_EVENT_SOURCE":"projects/global-traders-usa-84059/locations/us-west1/services/ssrglobaltradersusa84059"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://ssrglobaltradersusa84059-o63hsywovq-uw.a.run.app","serviceAccountEmail":"1069022321540-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"ssrglobaltradersusa84059-00003-maf","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2024-01-15T17:20:48.562208370Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-codebase":"firebase-frameworks-global-traders-usa-84059","firebase-functions-hash":"71f85f777d767028512ccda53aabb0d49806473d"},"environment":"GEN_2","url":"https://us-west1-global-traders-usa-84059.cloudfunctions.net/ssrglobaltradersusa84059","createTime":"2023-09-11T21:07:38.090380610Z"}]}
[debug] [2024-03-13T04:31:55.699Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 [none]
[debug] [2024-03-13T04:31:56.408Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 200
[debug] [2024-03-13T04:31:56.408Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/global-traders-usa-84059 {"projectId":"global-traders-usa-84059","projectNumber":"1069022321540","displayName":"global-traders-usa","name":"projects/global-traders-usa-84059","resources":{"hostingSite":"global-traders-usa-84059","storageBucket":"global-traders-usa-84059.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_a276bd60-b60c-4b4d-ab4e-a3589e1778a1"}
[debug] [2024-03-13T04:31:56.408Z] [functions] found 1 new HTTP functions, testing setIamPolicy permission...
[debug] [2024-03-13T04:31:56.409Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions [none]
[debug] [2024-03-13T04:31:56.409Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions x-goog-quota-user=projects/global-traders-usa-84059
[debug] [2024-03-13T04:31:56.409Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2024-03-13T04:31:57.824Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions 200
[debug] [2024-03-13T04:31:57.825Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/global-traders-usa-84059:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2024-03-13T04:31:57.825Z] [functions] found setIamPolicy permission, proceeding with deploy
[debug] [2024-03-13T04:31:57.825Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-03-13T04:31:57.825Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions:generateUploadUrl {}
[debug] [2024-03-13T04:31:58.786Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-03-13T04:31:58.786Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-672566871410.us-central1.cloudfunctions.appspot.com/de1a9175-578f-41c8-bc54-d0ab3f8736f0.zip?GoogleAccessId=service-1069022321540@gcf-admin-robot.iam.gserviceaccount.com&Expires=1710306118&Signature=DE3px3q%2BrGYRXfeXQaovrudSGfxtC%2FtnqPlsi3syceLt3hpAOaTWY6PEz3u31TANzKCW35yKdVB8Q1nLFu0QGpOanEC5SOqZ0FTbQfo6EMTkKz3Z24jPd4WgI7v770eRyJRiAY9mu9RP4kPn2SGqhicw97R%2F7IQFR8WQKJMZBPGFyNbRDOwLU30zaQkcAdIRHfAt9Ccicljs9qPncv6BcpF9Ew3r4VuwQqzV04GwQWGpmytXDVpsIrvammlixyWXfXvp3qXFumEHH%2BNrRWKYV7g2VuPmAMJvj%2BG1BKEQMDvd4V695fE1PMLp75ftP97fVtmwpqe9K9Ft8xcvE1hAFg%3D%3D"}
[debug] [2024-03-13T04:31:58.787Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-672566871410.us-central1.cloudfunctions.appspot.com/de1a9175-578f-41c8-bc54-d0ab3f8736f0.zip GoogleAccessId=service-1069022321540%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1710306118&Signature=DE3px3q%2BrGYRXfeXQaovrudSGfxtC%2FtnqPlsi3syceLt3hpAOaTWY6PEz3u31TANzKCW35yKdVB8Q1nLFu0QGpOanEC5SOqZ0FTbQfo6EMTkKz3Z24jPd4WgI7v770eRyJRiAY9mu9RP4kPn2SGqhicw97R%2F7IQFR8WQKJMZBPGFyNbRDOwLU30zaQkcAdIRHfAt9Ccicljs9qPncv6BcpF9Ew3r4VuwQqzV04GwQWGpmytXDVpsIrvammlixyWXfXvp3qXFumEHH%2BNrRWKYV7g2VuPmAMJvj%2BG1BKEQMDvd4V695fE1PMLp75ftP97fVtmwpqe9K9Ft8xcvE1hAFg%3D%3D
[debug] [2024-03-13T04:31:58.787Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-672566871410.us-central1.cloudfunctions.appspot.com/de1a9175-578f-41c8-bc54-d0ab3f8736f0.zip [stream]
[debug] [2024-03-13T04:32:01.104Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-672566871410.us-central1.cloudfunctions.appspot.com/de1a9175-578f-41c8-bc54-d0ab3f8736f0.zip 200
[debug] [2024-03-13T04:32:01.104Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-672566871410.us-central1.cloudfunctions.appspot.com/de1a9175-578f-41c8-bc54-d0ab3f8736f0.zip [omitted]
[info] +  functions: . folder uploaded successfully 
[info] i  functions: creating Node.js 18 (1st Gen) function app(us-central1)... 
[debug] [2024-03-13T04:32:01.107Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions [none]
[debug] [2024-03-13T04:32:01.107Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions {"name":"projects/global-traders-usa-84059/locations/us-central1/functions/app","sourceUploadUrl":"https://storage.googleapis.com/uploads-672566871410.us-central1.cloudfunctions.appspot.com/de1a9175-578f-41c8-bc54-d0ab3f8736f0.zip?GoogleAccessId=service-1069022321540@gcf-admin-robot.iam.gserviceaccount.com&Expires=1710306118&Signature=DE3px3q%2BrGYRXfeXQaovrudSGfxtC%2FtnqPlsi3syceLt3hpAOaTWY6PEz3u31TANzKCW35yKdVB8Q1nLFu0QGpOanEC5SOqZ0FTbQfo6EMTkKz3Z24jPd4WgI7v770eRyJRiAY9mu9RP4kPn2SGqhicw97R%2F7IQFR8WQKJMZBPGFyNbRDOwLU30zaQkcAdIRHfAt9Ccicljs9qPncv6BcpF9Ew3r4VuwQqzV04GwQWGpmytXDVpsIrvammlixyWXfXvp3qXFumEHH%2BNrRWKYV7g2VuPmAMJvj%2BG1BKEQMDvd4V695fE1PMLp75ftP97fVtmwpqe9K9Ft8xcvE1hAFg%3D%3D","entryPoint":"app","runtime":"nodejs18","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"067d0639df84d7490f6779ab6554c1e7bcea7b69"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"STRIPE_KEY":"sk_test_51M2FX6LW6ZS1XG6BerEsnP1kvHLDG8cGjUHnGGdvRkKR2Idrra8ZugvNrR6swxUX7t2cQ9eApxYII8PHA5kbog1e0068pM7yLK","MONGODB_URL":"mongodb+srv://socialengagementgroupmarketing:MX9LgCTbRFFbAriF@cluster0.jg8du4c.mongodb.net/?retryWrites=true&w=majority","STRIPE_SECRET":"whsec_0a342bd8f77706fb693a1b32b726cb412de4455ee74e4e5d5d921af8d65ea4b9","PUBLIC_URL":"http://localhost:5173/checkout/cart","FIREBASE_CONFIG":"{\"projectId\":\"global-traders-usa-84059\",\"storageBucket\":\"global-traders-usa-84059.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"global-traders-usa-84059","EVENTARC_CLOUD_EVENT_SOURCE":"projects/global-traders-usa-84059/locations/us-central1/functions/app"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2024-03-13T04:32:01.790Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions 403
[debug] [2024-03-13T04:32:01.790Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/global-traders-usa-84059/locations/us-central1/functions {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/global-traders-usa-84059/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] !  functions: failed to create function projects/global-traders-usa-84059/locations/us-central1/functions/app 
[error] Failed to create function projects/global-traders-usa-84059/locations/us-central1/functions/app
[debug] [2024-03-13T04:32:01.796Z] Total Function Deployment time: 686
[debug] [2024-03-13T04:32:01.796Z] 1 Functions Deployed
[debug] [2024-03-13T04:32:01.796Z] 1 Functions Errored
[debug] [2024-03-13T04:32:01.796Z] 0 Function Deployments Aborted
[debug] [2024-03-13T04:32:01.796Z] Average Function Deployment time: 685
[info] 
[info] Functions deploy had errors with the following functions:
	app(us-central1)
[debug] [2024-03-13T04:32:02.139Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-03-13T04:32:02.140Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/global-traders-usa-84059/locations/us-central1/repositories/gcf-artifacts/packages/app [none]
[debug] [2024-03-13T04:32:02.141Z] >>> [apiv2][query] GET https://us.gcr.io/v2/global-traders-usa-84059/gcf/us-central1/tags/list [none]
[debug] [2024-03-13T04:32:02.627Z] <<< [apiv2][status] GET https://us.gcr.io/v2/global-traders-usa-84059/gcf/us-central1/tags/list 200
[debug] [2024-03-13T04:32:02.627Z] <<< [apiv2][body] GET https://us.gcr.io/v2/global-traders-usa-84059/gcf/us-central1/tags/list {"child":[],"manifest":{},"name":"global-traders-usa-84059/gcf/us-central1","tags":[]}
[debug] [2024-03-13T04:32:02.627Z] Could not find image for function projects/global-traders-usa-84059/locations/us-central1/functions/app
[debug] [2024-03-13T04:32:03.759Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/global-traders-usa-84059/locations/us-central1/repositories/gcf-artifacts/packages/app 403
[debug] [2024-03-13T04:32:03.759Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/global-traders-usa-84059/locations/us-central1/repositories/gcf-artifacts/packages/app {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #global-traders-usa-84059 by visiting https://console.developers.google.com/billing/enable?project=global-traders-usa-84059 then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=global-traders-usa-84059"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/global-traders-usa-84059","service":"artifactregistry.googleapis.com"}}]}}
[warn] !  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/artifacts/docker/global-traders-usa-84059/us-central1/gcf-artifacts 
[debug] [2024-03-13T04:32:03.760Z] Functions deploy failed.
[debug] [2024-03-13T04:32:03.760Z] {
  "endpoint": {
    "id": "app",
    "project": "global-traders-usa-84059",
    "region": "us-central1",
    "entryPoint": "app",
    "platform": "gcfv1",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "STRIPE_KEY": "sk_test_51M2FX6LW6ZS1XG6BerEsnP1kvHLDG8cGjUHnGGdvRkKR2Idrra8ZugvNrR6swxUX7t2cQ9eApxYII8PHA5kbog1e0068pM7yLK",
      "MONGODB_URL": "mongodb+srv://socialengagementgroupmarketing:MX9LgCTbRFFbAriF@cluster0.jg8du4c.mongodb.net/?retryWrites=true&w=majority",
      "STRIPE_SECRET": "whsec_0a342bd8f77706fb693a1b32b726cb412de4455ee74e4e5d5d921af8d65ea4b9",
      "PUBLIC_URL": "http://localhost:5173/checkout/cart",
      "FIREBASE_CONFIG": "{\"projectId\":\"global-traders-usa-84059\",\"storageBucket\":\"global-traders-usa-84059.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "global-traders-usa-84059",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/global-traders-usa-84059/locations/us-central1/functions/app"
    },
    "codebase": "default",
    "targetedByOnly": false,
    "hash": "067d0639df84d7490f6779ab6554c1e7bcea7b69",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/global-traders-usa-84059/locations/us-central1/functions/app"
    },
    "exit": 1,
    "message": "Failed to create function projects/global-traders-usa-84059/locations/us-central1/functions/app",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/global-traders-usa-84059/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/global-traders-usa-84059/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2024-03-13T04:32:04.078Z] Error: Failed to create function app in region us-central1
    at C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.createV1Function (C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:180:32)
    at async Fabricator.createEndpoint (C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:132:13)
    at async handle (C:\Users\mdant\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
